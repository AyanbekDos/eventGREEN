# üéâ EventGREEN Bot v4

**–£–º–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

[![Docker](https://img.shields.io/badge/Docker-Ready-blue)](https://www.docker.com/)
[![Python](https://img.shields.io/badge/Python-3.12+-green)](https://www.python.org/)
[![AWS](https://img.shields.io/badge/AWS-Lightsail-orange)](https://aws.amazon.com/lightsail/)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

ü§ñ **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**
- –ò–º–ø–æ—Ä—Ç VCF —Ñ–∞–π–ª–æ–≤ –∏–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- AI-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ Google Gemini
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π

üìÖ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤
- –ù–∞–¥—ë–∂–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ threading.Timer

üìä **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π

‚ö° **Production-Ready**
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ AWS Lightsail
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞—â–∏—Ç–∞ –æ—Ç Event Loop –æ—à–∏–±–æ–∫

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### ü§ñ –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
- `run_bot.py` - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
- `google_sheets_manager.py` - –†–∞–±–æ—Ç–∞ —Å Google Sheets API
- `table_assignment_manager.py` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–ª–æ–º —Ç–∞–±–ª–∏—Ü
- `vcf_normalizer_simple.py` - –û–±—Ä–∞–±–æ—Ç–∫–∞ vCard —Ñ–∞–π–ª–æ–≤
- `ai_event_filter.py` - AI-–∞–Ω–∞–ª–∏–∑ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ Gemini

### ‚è∞ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `notification_adapter.py` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä (–∞–≤—Ç–æ–≤—ã–±–æ—Ä –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞)
- `notification_scheduler_v2.py` - –õ–æ–∫–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (threading.Timer)
- `notification_scheduler_workers.py` - Cloudflare Workers –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (cron)

### üì¶ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- `examples/` - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Cloudflare Workers
- `tests/` - –¢–µ—Å—Ç—ã –∏ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone <repository>
cd eventGREEN_v4
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
GEMINI_API_KEY=your_gemini_api_key_here
ADMIN_TELEGRAM_ID=your_admin_telegram_id
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API
1. –ü–æ–º–µ—Å—Ç–∏—Ç–µ `credentials.json` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞—Å—Ç `token.json` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 4. –ó–∞–ø—É—Å–∫
```bash
python run_bot.py
```

## üåç –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
```bash
python run_bot.py
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç threading.Timer –¥–ª—è —Ç–æ—á–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

### Cloudflare Workers (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ CLOUDFLARE_WORKERS_SETUP.md
wrangler deploy
```

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
- `/menu` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
- `/import` - –ò–º–ø–æ—Ä—Ç vCard —Ñ–∞–π–ª–∞
- `/today` - –°–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- `/potential_clients` - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
- `/potential_revenue` - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
- `/notifications HH:MM timezone` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `/scheduler_status` - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- üïê **–í—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (–Ω–∞–ø—Ä–∏–º–µ—Ä: 20:15)
- üåç **–í—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É** (–Ω–∞–ø—Ä–∏–º–µ—Ä: Asia/Almaty)
- ‚è∏Ô∏è **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (notification_time = "disabled")

–ü—Ä–∏–º–µ—Ä—ã:
```
/notifications 09:00 Europe/Moscow
/notifications 14:30 Asia/Almaty  
/notifications disabled
```

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–æ —É–¥–æ–±–Ω–æ–µ –º–µ–Ω—é —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É **"‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"**.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
python tests/test_notification_adapter.py

# –î—Ä—É–≥–∏–µ —Ç–µ—Å—Ç—ã –≤ –ø–∞–ø–∫–µ tests/
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `CLOUDFLARE_WORKERS_SETUP.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Cloudflare Workers
- `DEPLOY.md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- `prd.md` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º** - threading.Timer –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Workers —Ä–µ–∂–∏–º** - cron triggers –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –≤—Ä–µ–º—è –∏ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **vCard –ø–∞—Ä—Å–∏–Ω–≥** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤
- **AI-–∞–Ω–∞–ª–∏–∑** - Gemini API –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- **Google Sheets** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏
- **–ü—É–ª —Ç–∞–±–ª–∏—Ü** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Google Sheets API credentials
- Telegram Bot Token
- Gemini API Key

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø—Ä–æ–µ–∫—Ç —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º.

---

<div align="center">

**EventGREEN Bot v4** - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏

Made with ‚ù§Ô∏è for efficient event management

</div>